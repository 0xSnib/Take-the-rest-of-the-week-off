//@version=4
strategy("Buy on Monday and Sell on Wednesday with Stop Loss", overlay=true, default_qty_type=strategy.percent_of_equity, default_qty_value=100)

// Input for buy/sell hours
buyHour = input(defval=9, title="Buy Hour", minval=0, maxval=23)
sellHour = input(defval=9, title="Sell Hour", minval=0, maxval=23)

// Stop loss as a percentage of the entry price
riskPercentage = 2.0/100

// Calculate the day of the week (0 = Sunday, 1 = Monday, etc.)
dayOfWeek = dayofweek

// Conditions to enter and close trades
buyCondition = (dayOfWeek == dayofweek.monday) and (hour == buyHour)
sellCondition = (dayOfWeek == dayofweek.wednesday) and (hour == sellHour)

// Calculate the stop loss price
longStopPrice = close * (1 - riskPercentage)

if (buyCondition)
    strategy.entry("Buy", strategy.long, stop=longStopPrice)

if (sellCondition)
    strategy.close("Buy")

// Plot shapes on the chart for visualization
plotshape(series=buyCondition, title="Buy Signal", location=location.belowbar, color=color.green, style=shape.labelup, text="BUY")
plotshape(series=sellCondition, title="Sell Signal", location=location.abovebar, color=color.red, style=shape.labeldown, text="SELL")
